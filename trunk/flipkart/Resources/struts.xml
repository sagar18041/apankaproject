<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
   "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
   "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
	<constant name="struts.ui.theme" value="simple" />
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<constant name="struts.devMode" value="false" />
	<constant name="struts.custom.i18n.resources" value="ApplicationResources" />
	<constant name="struts.multipart.maxSize" value="1024000" />

	<package name="default" extends="struts-default" namespace="/">

		<result-types>
			<result-type name="tiles"
				class="org.apache.struts2.views.tiles.TilesResult" />
		</result-types>

		<!-- ******************Login Intercepter************************* -->

		<interceptors>
			<interceptor name="nlogin"
				class="com.flipkart.interceptor.LoginInterceptor" />
			<interceptor-stack name="loginStack">
				<interceptor-ref name="servletConfig" />
				<interceptor-ref name="params" />
				<interceptor-ref name="nlogin" />
				<interceptor-ref name="prepare" />
				<interceptor-ref name="chain" />
				<interceptor-ref name="modelDriven" />
				<interceptor-ref name="fileUpload" />
				<interceptor-ref name="staticParams" />
				<interceptor-ref name="params" />
				<interceptor-ref name="conversionError" />
				<interceptor-ref name="validation" />
				<interceptor-ref name="workflow" />
			</interceptor-stack>
		</interceptors>
		<global-results>
			<result name="login" type="chain">home</result>
		</global-results>
		<!-- ******************End of Login Intercepter************************* -->

		<!-- ****************** Main Page ********************** -->

		<action name="home" class="com.flipkart.action.authentication.HomeAction">
			<result name="success" type="tiles">/home.tiles</result>
		</action>

		<!-- ****************** End of Main Page ********************** -->

		<!-- ****************** Place Order ********************** -->

		<action name="emaillogin" class="com.flipkart.action.placeorder.PlaceOrderAction"
			method="fetchEmailID">
			<result name="success" type="tiles">/emaillogin.tiles</result>
		</action>

		<action name="shippingaddress" class="com.flipkart.action.placeorder.PlaceOrderAction"
			method="fetchShippingAddr">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/shippingaddress.tiles</result>
		</action>
		<action name="ordersummary" class="com.flipkart.action.placeorder.PlaceOrderAction"
			method="fetchOrderSummary">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/ordersummary.tiles</result>
			<result name="error" type="redirectAction">
				<param name="actionName">shippingaddress</param>
				<param name="errorMsg">${errorMsg}</param>
			</result>
		</action>

		<action name="deleteitem" class="com.flipkart.action.placeorder.PlaceOrderAction"
			method="deleteItemFromCart">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/ordersummary.tiles</result>
		</action>

		<action name="payment" class="com.flipkart.action.placeorder.PlaceOrderAction"
			method="goToPayment">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/paymentoptions.tiles</result>
		</action>

		<!-- ********************************* End of Place Order *********************************** -->


		<!-- ********************************* Account Information ********************************** -->

		<!-- ================================== Personal Information =============================== -->

		<action name="accountpage"
			class="com.flipkart.action.accountmanagement.PersonalInformationAction"
			method="displayPersonalInformation">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/accountpage.tiles</result>
		</action>

		<action name="modifypersonalinformation"
			class="com.flipkart.action.accountmanagement.PersonalInformationAction"
			method="modifyPersonalInformation">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/accountpage.tiles</result>
			<result name="error" type="tiles">/accountpage.tiles</result>
		</action>

		<!-- ================================ Change Password ================================ -->

		<action name="passwordpage"
			class="com.flipkart.action.accountmanagement.PasswordChangeAction"
			method="loadPage">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/passwordpage.tiles</result>
		</action>

		<action name="modifypassword"
			class="com.flipkart.action.accountmanagement.PasswordChangeAction"
			method="modifyPassword">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/passwordpage.tiles</result>
			<result name="error" type="tiles">/passwordpage.tiles</result>
		</action>

		<!-- ================================ Manage Addresses ================================ -->

		<action name="addresspage"
			class="com.flipkart.action.accountmanagement.AddressManagementAction"
			method="loadPage">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/addresspage.tiles</result>
		</action>


		<action name="addaddress"
			class="com.flipkart.action.accountmanagement.AddressManagementAction"
			method="addAddress">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/addresspage.tiles</result>
			<result name="error" type="tiles">/addresspage.tiles</result>
		</action>

		<action name="deleteaddress"
			class="com.flipkart.action.accountmanagement.AddressManagementAction"
			method="deleteAddress">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/addresspage.tiles</result>
			<result name="error" type="tiles">/addresspage.tiles</result>
		</action>


		<!-- ================================ Update Email ================================ -->

		<action name="emailpage"
			class="com.flipkart.action.accountmanagement.EmailUpdateAction"
			method="loadPage">
			<result name="success" type="tiles">/emailpage.tiles</result>
		</action>

		<action name="modifyemail"
			class="com.flipkart.action.accountmanagement.EmailUpdateAction"
			method="sendResetLink">
			<result name="success" type="tiles">/emailpage.tiles</result>
			<result name="error" type="tiles">/emailpage.tiles</result>
		</action>

		<action name="emailupdate"
			class="com.flipkart.action.accountmanagement.EmailUpdateAction"
			method="loadResetPage">
			
			<result name="success" type="tiles">/emailresetpage.tiles</result>
			<result name="error" type="tiles">/emailresetpage.tiles</result>
		</action>

		<action name="emailreset"
			class="com.flipkart.action.accountmanagement.EmailUpdateAction"
			method="resetEmail">

			<result name="success" type="tiles">/emailresetpage.tiles</result>
			<result name="error" type="tiles">/emailresetpage.tiles</result>
		</action>
		
		
		<!-- ================================ Deactivate Account ================================ -->
		<action name="deactivateaccountpage"
			class="com.flipkart.action.accountmanagement.DeactivateAccountAction"
			method="init">
			<result name="success" type="tiles">/deactivateaccount.tiles</result>
			<result name="error" type="tiles">/deactivateaccount.tiles</result>
		</action>

		<action name="deactivateaccount"
			class="com.flipkart.action.accountmanagement.DeactivateAccountAction"
			method="deactivateAccount">
			<result name="success" type="chain">logout</result>
			<result name="error" type="tiles">/deactivateaccount.tiles</result>
		</action>


		<!-- ================================ Order History ================================ -->
		<action name="vieworders"
			class="com.flipkart.action.accountmanagement.OrderHistoryAction"
			method="loadPage">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/orderhistorypage.tiles</result>
		</action>
		
		<!-- ================================ Order Status ================================ -->
		<action name="vieworderstatus"
			class="com.flipkart.action.accountmanagement.OrderDetailsAction"
			method="loadStatusPage">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/orderstatuspage.tiles</result>
		</action>
		
		<!-- ================================ Order Details ================================ -->
		<action name="vieworderdetails"
			class="com.flipkart.action.accountmanagement.OrderDetailsAction"
			method="loadPage">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/orderdetailspage.tiles</result>
			<result name="error" type="tiles">/orderstatuspage.tiles</result>
		</action>
		
		<!-- ******************************* End of Account Information ********************************** -->



		<!--*************************************Authentication************************************************ -->

		<action name="signup" class="com.flipkart.action.authentication.SignUpAction"
			method="createAccount">
			<result name="success" type="chain">home</result>
			<result name="error" type="chain">home</result>
		</action>
		<action name="login" class="com.flipkart.action.authentication.LoginAction"
			method="login">
			<result name="success" type="chain">home</result>
			<result name="error" type="chain">home</result>
		</action>
		<action name="logout" class="com.flipkart.action.authentication.LoginAction"
			method="logout">
			<result name="success" type="chain">home</result>
			<result name="error" type="chain">home</result>
		</action>
		<action name="forgotpassword"
			class="com.flipkart.action.authentication.ForgotPasswordAction"
			method="getLink">
			<result name="success" type="chain">home</result>
			<result name="error" type="chain">home</result>
		</action>
		<action name="recoverpassword"
			class="com.flipkart.action.authentication.ForgotPasswordAction"
			method="validateLink">
			<result name="success" type="tiles">/recoverpassword.tiles</result>
			<result name="error" type="tiles">/recoverpassworderror.tiles</result>
		</action>
		<action name="resetpassword"
			class="com.flipkart.action.authentication.ForgotPasswordAction"
			method="resetPassword">
			<result name="success" type="chain">home</result>
			<result name="error" type="chain">home</result>
		</action>

		<!--*************************************End Of Authentication****************************************** -->

		<!-- ================================== System Administration =============================== -->

		<action name="adminhome"
			class="com.flipkart.action.systemadmincategory.AdminHomeAction">
			<result name="success" type="tiles">/adminhome.tiles</result>
		</action>

		<action name="adminviewcategory"
			class="com.flipkart.action.systemadmincategory.AdminCategoryAction"
			method="fetchCategoryList">
			<result name="success" type="tiles">/adminviewcategory.tiles</result>
		</action>
		<action name="adminaddcategory"
			class="com.flipkart.action.systemadmincategory.AdminCategoryAction"
			method="insertNewCategory">
			<result name="success" type="tiles">/adminaddcategory.tiles</result>
			<result name="error" type="tiles">/adminaddcategory.tiles</result>
		</action>
		<action name="adminverifycategory"
			class="com.flipkart.action.systemadmincategory.AdminCategoryAction"
			method="fetchVerificationCategory">
			<result name="success" type="tiles">/adminverifycategory.tiles
			</result>
		</action>

		<action name="adminchangestatuscategory"
			class="com.flipkart.action.systemadmincategory.AdminCategoryAction"
			method="changeStatusCategory">
			<result name="success" type="tiles">/adminverifycategory.tiles
			</result>
			<result name="error" type="tiles">/adminverifycategory.tiles</result>
		</action>

		<action name="adminaddcategory"
			class="com.flipkart.action.systemadmincategory.AdminCategoryAction"
			method="insertNewCategory">
			<result name="success" type="tiles">/adminaddcategory.tiles</result>
			<result name="error" type="tiles">/adminaddcategory.tiles</result>
		</action>

		<action name="adminlogininit"
			class="com.flipkart.action.systemadminauthentication.AdminLoginAction"
			method="init">
			<result name="success" type="tiles">/adminlogin.tiles</result>
		</action>

		<action name="adminlogin"
			class="com.flipkart.action.systemadminauthentication.AdminLoginAction"
			method="login">
			<result name="success" type="chain">adminhome</result>
			<result name="error" type="tiles">/adminlogin.tiles</result>
		</action>

		<!-- ============================== Bank Begin (Aamir) =========================== -->

		<action name="netbankingviewentries" class="com.flipkart.action.bank.NetBankingAction"
			method="viewEntries">
			<result name="success" type="tiles">/netbankingviewentries.tiles
			</result>
			<result name="error" type="tiles">/netbankingviewentries.tiles
			</result>
		</action>

		<!-- ============================== Bank End (Aamir) =========================== -->

		<action name="adminchangestatuscategory"
			class="com.flipkart.action.systemadmincategory.AdminCategoryAction"
			method="changeStatusCategory">
			<result name="success" type="tiles">/adminverifycategory.tiles
			</result>
			<result name="error" type="tiles">/adminverifycategory.tiles</result>
		</action>

		<!-- ============================== End of System Administration =========================== -->

		<!-- ************************************** Search Page ************************************ -->

		<action name="searchPage" class="com.flipkart.action.searchitem.SearchItemAction">
			<result name="success" type="chain">searchHome</result>
			<result name="error" type="chain">searchErrorHome</result>

		</action>
		<action name="searchHome" class="com.flipkart.action.authentication.HomeAction">
			<result name="success" type="tiles">/search.tiles</result>
		</action>
		<action name="searchErrorHome" class="com.flipkart.action.authentication.HomeAction">
			<result name="success" type="tiles">/searchError.tiles</result>
		</action>


		<!-- ================================ End of search Page ===================================== -->
		<!-- ************************************** Browse Page ************************************ -->
		<action name="browseCategory" class="com.flipkart.action.browseitem.BrowseItemsAction"
			method="browseOnCategory">
			<result name="success" type="chain">searchBrowse</result>
		</action>
		<action name="searchBrowse" class="com.flipkart.action.authentication.HomeAction">
			<result name="success" type="tiles">/browse.tiles</result>
		</action>
		<action name="browseSubCategory" class="com.flipkart.action.browseitem.BrowseItemsAction"
			method="browseOnSubCategory">
			<result name="success" type="chain">searchBrowse</result>
		</action>
		<!-- ================================ End of Browse Page ===================================== -->

		<!-- ******************************* Cart Management by Ritu ********************************* -->
		<action name="addToCart" class="com.flipkart.action.cartmanagement.CartAction"
			method="addToCart">
			<interceptor-ref name="loginStack" />
			<result name="success" type="chain">cartDisplay</result>
			<result name="error" type="tiles">/carterror.tiles</result>
		</action>

		<action name="cartDisplay" class="com.flipkart.action.cartmanagement.CartAction"
			method="displayCart">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/viewcart.tiles</result>
			<result name="error" type="tiles">/carterror.tiles</result>
		</action>

		<action name="updateCart" class="com.flipkart.action.cartmanagement.CartAction"
			method="updateCart">
			<interceptor-ref name="loginStack" />
			<result name="success" type="chain">cartDisplay</result>
		</action>
		
		<action name="deleteCart" class="com.flipkart.action.cartmanagement.CartAction"
			method="deleteCart">
			<interceptor-ref name="loginStack" />
			<result name="success" type="chain">cartDisplay</result>
		</action>

		<action name="moveToWishlist" class="com.flipkart.action.cartmanagement.CartAction"
			method="moveWishlist">
			<interceptor-ref name="loginStack" />
			<result name="success" type="chain">cartDisplay</result>
		</action>
		
		<action name="viewwishlist" class="com.flipkart.action.wishlist.WishlistAction"
			method="viewWishlist">
			<interceptor-ref name="loginStack" />
			<result name="success" type="tiles">/viewWishlist.tiles</result>
			<result name="error" type="tiles">/carterror.tiles</result>
		</action>
		
		<action name="removeFromwishlist" class="com.flipkart.action.wishlist.WishlistAction"
			method="removeFromWishlist">
			<interceptor-ref name="loginStack" />
			<result name="success" type="redirect">viewwishlist</result>
		</action>
		
		<action name="addToWishlist" class="com.flipkart.action.wishlist.WishlistAction"
			method="addToWishlist">
			<interceptor-ref name="loginStack" />
			<result name="success" type="chain">viewwishlist</result>
			<result name="error" type="tiles">/carterror.tiles</result>
		</action>
		
		<action name="addToCartFromWishlist" class="com.flipkart.action.cartmanagement.CartAction"
			method="addToCartFromWishlist">
			<interceptor-ref name="loginStack" />
			<result name="success" type="chain">cartDisplay</result>
		</action>
		<action name="sortByValue" class="com.flipkart.action.wishlist.WishlistAction"
			method="viewWishlist">
			<result name="success" type="chain">viewwishlist</result>
		</action>

		<!-- ******************************* End of Cart Management ********************************** -->


		<!-- ******************************* Product Page by Ananda ********************************** -->
		<action name="displayitem" class="com.flipkart.action.browseitem.ProductAction"
			method="displayItem">
			<result name="success" type="tiles">/displayitem.tiles</result>
		</action>
		<action name="rateandreview" class="com.flipkart.action.browseitem.ProductAction" 
		method="rateAndReview">
		<interceptor-ref name="loginStack" />
		<result name="success" type="tiles">/rateandreview.tiles</result>
		<result name="tohome" type="tiles">/home.tiles</result>
		<result name="error" type="tiles">/rateandreview.tiles</result>
		</action>
		<action name="saverateandreview" class="com.flipkart.action.browseitem.ProductAction" 
		method="saveRateAndReview">
		<interceptor-ref name="loginStack" />
		<result name="success" type="tiles">/home.tiles</result>	
		<result name="error" type="chain">rateandreview</result>
		<result name="tohome" type="tiles">/home.tiles</result>
		</action>
		<!-- ******************************* End of Product Page by ********************************** -->

	</package>
</struts>
